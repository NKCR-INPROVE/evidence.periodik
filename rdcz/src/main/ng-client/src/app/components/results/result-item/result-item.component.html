<mz-card [hoverable]="true" [class]="'app-item'">
  <mz-card-content>
    <!--<span [class]="'app-card-triangle app-state-' + result.stav"></span>-->
    <span  class="app-state">
      <span *ngFor="let stav of stavy" [class]="'app-state-item app-state-item-' + stav"></span>
    </span>
    <div class="row">
      <div class="col s2" *ngIf="result.id != '1388'"><!-- Zde bude podminka jestli item obsahuje obrazek, doda Alberto -->
        <img src="assets/img/thumb-img.jpg" alt="" class="responsive-img" />
      </div><!--/.col -->
      <div [class]="result.id != '1388' ? 'col s10' : 'col s12'"><!-- Zde bude podminka jestli item obsahuje obrazek, doda Alberto -->
        <span *ngIf="result.title" class="card-title app-brand-text text-app-red">
          <i mz-icon-mdi [icon]="'book-open-page-variant'"></i>
          {{result.title}}
        </span>
        <label *ngIf="result.varnazev">
          <strong>{{'label.variantni-nazev' | translate}}:</strong>
          <span *ngFor="let v of result.varnazev">
            {{v}}<span class="app-separator">&#160;&#160;/&#160;&#160;</span>
          </span>
        </label><!--/label -->
        <label *ngIf="result.autor">
          <strong>{{'label.hlavni-autor' | translate}}:</strong>
          <span>
            {{result.autor}}<span class="app-separator">&#160;&#160;/&#160;&#160;</span>
          </span>
        </label><!--/label -->
        <label *ngIf="result.mistovyd">
          <strong>{{'label.misto-vydani' | translate}}:</strong>
          {{result.mistovyd}}
        </label><!--/label -->
        <label *ngIf="result.vydavatel">
          <strong>{{'label.nakladatel' | translate}}:</strong>
          {{result.vydavatel}}
        </label><!--/label -->
        <label *ngIf="result.rokvydstr">
          <strong>{{'label.rok-vydani' | translate}}:</strong>
          {{result.rokvydstr}}
        </label><!--/label -->
        <label *ngIf="result.bibliographich_data">
          <strong>{{'label.bib-udaje' | translate}}:</strong>
          <a [href]="result.bibliographich_data" target="_blank">{{result.bibliographich_data}}</a>
        </label><!--/label -->
      </div><!--/.col -->
    </div><!--/.row -->
    
    <div class="app-card-detail" [attr.id]="'app-card-detail-' + result.id" style="display:none;">
      <mz-collapsible [mode]="'expandable'">

        <mz-collapsible-item>
          <mz-collapsible-item-header>
            <i mz-icon-mdi [icon]="'plus'"></i>
            <i mz-icon-mdi [icon]="'minus'"></i>
            {{'label.seznam-predloh' | translate}} <span class="app-brand-text text-lighten-3">({{predlohy.length}})</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body>
            <table class="striped">
              <thead>
                <tr>
                  <th (click)="sortBy('stav')" [class.active]="currentSort === 'stav'" [class.active-down]="currentDir === 1">
                    {{'label.stav' | translate}}
                  </th>
                  <th></th>
                  <th (click)="sortBy('cislordcz')" [class.active]="currentSort === 'cislordcz'" [class.active-down]="currentDir === 1">
                    {{'label.cislo-rdcz' | translate}}
                  </th>
                  <th (click)="sortBy('vlastnik')" [class.active]="currentSort === 'vlastnik'" [class.active-down]="currentDir === 1">
                    {{'label.vlastnik' | translate}}
                  </th>
                  <th (click)="sortBy('rokvydstr')" [class.active]="currentSort === 'rokvydstr'" [class.active-down]="currentDir === 1">
                    {{'label.rok-per' | translate}}
                  </th>
                  <th (click)="sortBy('cast')" [class.active]="currentSort === 'cast'" [class.active-down]="currentDir === 1">
                    {{'label.cast-roc' | translate}}
                  </th>
                  <th (click)="sortBy('rozsah')" [class.active]="currentSort === 'rozsah'" [class.active-down]="currentDir === 1">
                    {{'label.cislo' | translate}}
                  </th>
                  <th (click)="sortBy('financovano', true)" [class.active]="currentSort === 'financovano'" [class.active-down]="currentDir === 1">
                    {{'label.financovano' | translate}}
                  </th>
                  <th (click)="sortBy('signatura')" [class.active]="currentSort === 'signatura'" [class.active-down]="currentDir === 1">
                    {{'label.signatura' | translate}}
                  </th>
                  <th (click)="sortBy('carkod')" [class.active]="currentSort === 'carkod'" [class.active-down]="currentDir === 1">
                    {{'label.car-kod' | translate}}
                  </th>
                </tr>
              </thead>

              <tbody>
                <tr  *ngFor="let p of predlohy">
                  <td><span [class]="'app-state-item app-state-item-' + p.stav"></span></td>
                  <td>
                    <a mz-tooltip [tooltip]="p.url" [position]="'top'" [href]="p.url" title="" target="_blank">
                      <i mz-icon-mdi [icon]="'open-in-new'" [size]="'16px'"></i>
                    </a>
                  </td>
                  <td>{{p.cislordcz}}</td>
                  <td mz-tooltip [position]="'top'" [tooltip]="translate('cz.incad.nkp.digital.InsVlastnik', p.vlastnik)">{{p.vlastnik}}</td>
                  <td>{{p.rokvydstr}}</td>
                  <td>{{p.cast}}</td>
                  <td>{{p.rozsah}}</td>
                  <td>{{translate('cz.incad.nkp.digital.Dfinancovano', p.financovano)}}</td>
                  <td>{{p.signatura}}</td>
                  <td>{{p.carkod}}</td>
                </tr>
              </tbody>
            </table>
          </mz-collapsible-item-body>
        </mz-collapsible-item>

        <mz-collapsible-item *ngIf="digObjects.length > 0">
          <mz-collapsible-item-header>
            <i mz-icon-mdi [icon]="'plus'"></i>
            <i mz-icon-mdi [icon]="'minus'"></i>
            {{'label.digitalni-dokument' | translate}} <span class="app-brand-text text-lighten-3">({{digObjects.length}})</span>
          </mz-collapsible-item-header>
          <mz-collapsible-item-body>
            <mz-collection>
              <a mz-collection-link  *ngFor="let do of digObjects" [href]="do.link" target="_blank">{{do.link}}</a>
            </mz-collection>
          </mz-collapsible-item-body>
        </mz-collapsible-item>

      </mz-collapsible>
    </div><!--/.app-card-detail -->
    
  </mz-card-content>
  
  <mz-card-action>
    <span>
      {{'label.predlohy' | translate}}: {{predlohy.length}} 
    </span>
    <span *ngIf="result.ccnb">
      <span class="app-brand-text text-lighten-3">|</span>
      <strong>ÄŒNB:</strong>
      {{result.ccnb[0]}}
    </span>
    <span *ngIf="result.isbn">
      <span class="app-brand-text text-lighten-3">|</span>
      <strong>ISBN:</strong>
      {{result.isbn}}
    </span>
    <span *ngIf="result.issn">
      <span class="app-brand-text text-lighten-3">|</span>
      <strong>ISSN:</strong>
      {{result.issn}}
    </span>
    <a *ngIf="showingDetail" class="right app-clean-mg" (click)="toggleDetail('app-card-detail-' + result.id)">
       {{'btn.skryt-detail' | translate}}
    </a>
    <a *ngIf="!showingDetail" class="right app-clean-mg" (click)="toggleDetail('app-card-detail-' + result.id)">
       {{'btn.zobrazit-detail' | translate}}
    </a>
  </mz-card-action>
</mz-card>
